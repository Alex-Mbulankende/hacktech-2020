(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{151:function(e,a,t){e.exports=t.p+"static/media/planet.93ad548e.png"},152:function(e,a,t){e.exports=t.p+"static/media/facebook-login.f134922a.svg"},153:function(e,a,t){e.exports=t.p+"static/media/google-login.35543519.svg"},163:function(e,a,t){e.exports=t.p+"static/media/logo.ee2ab3af.svg"},171:function(e,a,t){e.exports=t(353)},180:function(e,a,t){},182:function(e,a,t){},188:function(e,a,t){},333:function(e,a,t){},335:function(e,a,t){},340:function(e,a,t){},350:function(e,a,t){},351:function(e,a,t){},352:function(e,a,t){},353:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(3),l=t.n(c),s=t(68),i=t(22),o=t(23),m=(t(179),t(180),t(149)),u=t(40),p=t(13),d=t(119),h=t(92),g={masks:[],handSanitizer:[],camping:[],medicine:[]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_LISTINGS":return Object(h.a)({},e,{masks:a.masks,handSanitizer:a.handSanitizer,camping:a.camping,medicine:a.medicine});default:return e}},f={sanitizers:0,masks:0,camping:0,medicine:0},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_STATS":return Object(h.a)({},e,{sanitizers:a.sanitizers,masks:a.masks,camping:a.camping,medicine:a.medicine});default:return e}},v=Object(p.a)();var y=t(47),N=(t(182),t(151)),w=t.n(N),k=(t(94),t(61)),O=(t(72),t(21)),j=(t(147),t(32)),x=(t(120),t(33)),C=t(30),T=(t(188),t(152)),I=t.n(T),S=t(153),z=t.n(S),A=function(e){return r.a.createElement(k.a,{className:"login-form",footer:null,visible:e.mod,onOk:e.handleOk,onCancel:function(){return e.setMod(!1)}},r.a.createElement(C.a,{to:"/map"},r.a.createElement("div",{className:"login-button2 facebook-login"},r.a.createElement("img",{src:I.a}))),r.a.createElement(C.a,{to:"/map"},r.a.createElement("div",{className:"login-button2 google-login"},r.a.createElement("img",{src:z.a}))),r.a.createElement("hr",null)," or",r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(j.a.Item,null,r.a.createElement(x.a,{name:"title",className:"input-box",value:e.values,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:"Email Address"})),r.a.createElement(j.a.Item,null,r.a.createElement(x.a,{name:"title",className:"input-box",value:e.values,onChange:e.handleChange,onBlur:e.handleBlur,placeholder:"Password"})),r.a.createElement(C.a,{to:"/map"},r.a.createElement(O.a,{className:"login-button"},"Log In"))))},B=function(e){return r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"slidestats"},r.a.createElement("h1",{style:{opacity:".25"}},"5 New cases in Italy 1 day ago"),r.a.createElement("h1",{style:{opacity:".5"}},"38 New cases in Seoul 13 hours ago"),r.a.createElement("h1",null,"3 New cases in New York 1 day ago")),r.a.createElement("div",{className:"sidenav"},r.a.createElement("h1",null,"HOME"),r.a.createElement("h1",null,"ABOUT"),r.a.createElement("h1",null,"DONATE")),r.a.createElement("div",{className:"sidecircle"}),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Coronally"),r.a.createElement("p",null,"Bringing community together in crisis"))),r.a.createElement("div",{className:"begin-button"},r.a.createElement("h1",{onClick:function(){return e.setMod(!0)}},"Begin Here"),r.a.createElement("img",{src:w.a,alt:"planet"})),r.a.createElement(A,{mod:e.mod,setMod:e.setMod}))},L=function(){var e=Object(n.useState)(!1),a=Object(y.a)(e,2),t=a[0],c=a[1];return r.a.createElement(B,{mod:t,setMod:c})},_=(t(333),t(163)),D=t.n(_),G=function(e){return r.a.createElement("nav",{className:"navbar-horizontal"},r.a.createElement(C.a,{className:"title",to:"/"},r.a.createElement("img",{alt:"cor",id:"logo",src:D.a}),r.a.createElement("span",{className:"heading"},"CORONALLY")),r.a.createElement("div",{className:"links"},r.a.createElement(C.a,{activeClassName:"selected",to:"/donate"},r.a.createElement("div",{className:"popmodal"},"DONATE")),r.a.createElement("div",{className:"popmodal",onClick:e.setVis},r.a.createElement("div",{className:"text"},"CREATE LISTING")),r.a.createElement("div",{className:"popmodal",onClick:e.setAna},r.a.createElement("div",{className:"text"},"ANALYTICS")),r.a.createElement(C.a,{activeClassName:"selected",to:"/profile"},r.a.createElement("div",{className:"popmodal"},"PROFILE"))))},F=t(169),M=(t(335),t(336),t(64)),P=(t(338),t(70)),V=(t(340),function(e){return r.a.createElement("div",{className:"circles"},r.a.createElement(M.a.Group,{onChange:e.onChange},r.a.createElement(M.a,{value:"sanitizers"},r.a.createElement("div",{className:"item"},r.a.createElement(P.a,{className:"circprogress",type:"circle",width:72,strokeColor:{"0%":"#108ee9","100%":"#87d068"},percent:e.sanitizers.toFixed(0)}),r.a.createElement("h1",null,"Sanitizers"))),r.a.createElement(M.a,{value:"masks"},r.a.createElement("div",{className:"item"},r.a.createElement(P.a,{className:"circprogress",type:"circle",width:72,strokeColor:{"0%":"#108ee9","100%":"#87d068"},percent:e.masks.toFixed(0)}),r.a.createElement("h1",null,"Masks"))),r.a.createElement(M.a,{value:"camping"},r.a.createElement("div",{className:"item"},r.a.createElement(P.a,{className:"circprogress",type:"circle",width:72,strokeColor:{"0%":"#108ee9","100%":"#87d068"},percent:e.camping.toFixed(0)}),r.a.createElement("h1",null,"Camping"))),r.a.createElement(M.a,{value:"medicine"},r.a.createElement("div",{className:"item"},r.a.createElement(P.a,{className:"circprogress",type:"circle",width:72,strokeColor:{"0%":"#108ee9","100%":"#87d068"},percent:e.medicine.toFixed(0)}),r.a.createElement("h1",null,"Medicine")))))}),U=t(14),R=t.n(U),H=t(41),Y=Object(o.c)((function(e){return{sanitizers:e.stats.sanitizers,masks:e.stats.masks,camping:e.stats.camping,medicine:e.stats.medicine}}),{getStats:function(e){return function(){var a=Object(H.a)(R.a.mark((function a(t){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(H.a)(R.a.mark((function a(n,r){var c,l;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("http://35.232.236.97:3000/magic/insight",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return c=a.sent,a.next=6,c.json();case 6:if(l=a.sent){a.next=9;break}throw new Error("Empty response from server");case 9:if(!l.error){a.next=11;break}throw new Error(l.error.message);case 11:console.log(l),t({type:"GET_STATS",sanitizers:100*l.sanitizer,masks:100*l.masks,camping:100*l.camping,medicine:100*l.medicine}),n(e),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),r(a.t0);case 19:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return Object(n.useEffect)((function(){e.getStats()})),r.a.createElement(V,{onChange:e.onChange,sanitizers:e.sanitizers,masks:e.masks,camping:e.camping,medicine:e.medicine})})),J=x.a.TextArea,q=function(e){return r.a.createElement(k.a,{visible:e.vis,onOk:e.handleOk,onCancel:e.setVis},r.a.createElement("h1",{className:"newlist"},"List New Item"),r.a.createElement(Y,{onChange:function(a){console.log(a.target.value),e.setFieldValue("category",a.target.value)}}),r.a.createElement("div",{className:"modalform"},r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("h1",{className:"label"},"Name of item"),r.a.createElement(j.a.Item,null,r.a.createElement(x.a,{name:"title",className:"input-box",value:e.values.title,onChange:e.handleChange,onBlur:e.handleBlur})),r.a.createElement("h1",{className:"label"},"Drop off location"),r.a.createElement(j.a.Item,null,r.a.createElement(x.a,{name:"location",className:"input-box",value:e.values.location,onChange:e.handleChange,onBlur:e.handleBlur})),r.a.createElement("h1",{className:"label"},"Price (USD)"),r.a.createElement(j.a.Item,null,r.a.createElement(x.a,{name:"price",className:"input-box",value:e.values.price,onChange:e.handleChange,onBlur:e.handleBlur})),r.a.createElement("a",{href:"https://imgur.com/upload",target:"_blank  "},r.a.createElement("h1",{className:"label"},"Picture URL")),r.a.createElement(j.a.Item,null,r.a.createElement(x.a,{name:"picture_url",className:"input-box",value:e.values.picture_url,onChange:e.handleChange,onBlur:e.handleBlur})),r.a.createElement("h1",{className:"label"},"Description"),r.a.createElement(j.a.Item,null,r.a.createElement(J,{name:"description",className:"input-box",value:e.values.description,onChange:e.handleChange,onBlur:e.handleBlur})),r.a.createElement(O.a,{type:"primary",htmlType:"submit",className:"login-button"},"Submit"))))},K=(t(344),t(170)),Q=Object(F.a)({mapPropsToValues:function(){return{title:"",location:"",description:"",picture_url:"",price:"",category:""}},handleSubmit:function(e,a){a.resetForm;var t=a.props;console.log(e),t.postListing(e),t.getStats()}})(q),W=Object(o.c)(null,{postListing:function(e){return function(){var a=Object(H.a)(R.a.mark((function a(t){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(H.a)(R.a.mark((function a(n,r){var c,l;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("https://44a050ab.ngrok.io/magic/addItem?"+"title=".concat(e.title,"&description=").concat(e.description,"&price=").concat(e.price,"&location=").concat(e.location,"&picture_url=").concat(e.picture_url,"&categoryID=").concat(e.category),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return c=a.sent,a.next=6,c.json();case 6:if(l=a.sent){a.next=9;break}throw new Error("Empty response from server");case 9:if(!l.error){a.next=11;break}throw new Error(l.error.message);case 11:console.log(l),400==l.statusCode?K.a.open({message:"Error",description:"Oops this listing has already been made"}):window.open(l.body,"_blank"),t({type:"POST_LISTING"}),n(e),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),console.log(a.t0),r(a.t0);case 21:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(Q),X=t(118),Z=t.n(X),$=(t(350),function(e){return r.a.createElement(k.a,{width:1700,visible:e.ana,onOk:e.handleOk,onCancel:e.setAna},r.a.createElement("h1",{className:"newlist"},"Coronally Dashboard"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"statswrapper"},r.a.createElement("h1",{className:"headtitle"},"Item Supply"),r.a.createElement(Y,null)),r.a.createElement("div",{className:"statswrapper2"},r.a.createElement("iframe",{className:"graph",src:"https://charts.mongodb.com/charts-coronavirus-lwlvn/embed/charts?id=6f921f0c-a1ee-4106-839c-412fad3c64e7&autorefresh=3600&theme=dark&attribution=false"}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"statswrapper3"},r.a.createElement("iframe",{width:"975",height:"460",className:"graph2",src:"https://charts.mongodb.com/charts-coronavirus-lwlvn/embed/charts?id=77ed8e96-69cd-42a0-bcab-66c572c1f747&autorefresh=3600&theme=dark&attribution=false"})),r.a.createElement("div",{className:"statswrapper4"},r.a.createElement("div",{className:"minicard"},r.a.createElement("p",null,"Available Items"),r.a.createElement("h1",null,"149")),r.a.createElement("div",{className:"minicard"},r.a.createElement("p",null,"Amount of items sold"),r.a.createElement("h1",null,"232")),r.a.createElement("div",{className:"minicard"},r.a.createElement("p",null,"Last Stats Update (GMT)"),r.a.createElement("h1",null,r.a.createElement(Z.a,{timezone:"GMT"}))),r.a.createElement("div",{className:"minicard"},r.a.createElement("p",null,"Last Stats Update (PST)"),r.a.createElement("h1",null,r.a.createElement(Z.a,null)))))))}),ee=t(168),ae=(t(351),function(e){if(!e)return null;for(var a=[],t=0;t<e.length;t++){var n=e[t];n.lng&&n.lat&&a.push({geometry:{type:"point",x:n.lng,y:n.lat},attributes:{ObjectID:t,MsgTime:Date.now(),title:n.title,description:n.description,image:n.picture_url,url:n.url}})}return a}),te=function(e){var a=Object(n.useRef)();return Object(n.useEffect)((function(){Object(ee.loadModules)(["esri/Map","esri/views/MapView","esri/Basemap","esri/layers/FeatureLayer","esri/layers/support/Field","esri/PopupTemplate"],{css:!0}).then((function(t){var n=Object(y.a)(t,6),r=n[0],c=n[1],l=n[2],s=n[3],i=n[4],o=(n[5],ae(e.masks)),m=ae(e.handSanitizer),u=ae(e.camping),p=ae(e.medicine),d=[new i({name:"ObjectID",alias:"ObjectID",type:"oid"}),new i({name:"description",alias:"Description",type:"string"}),new i({name:"title",alias:"Title",type:"string"}),new i({name:"image",alias:"Image",type:"string"}),new i({name:"url",alias:"Url",type:"string"})],h=(new l({portalItem:{id:"c70093e673dd417c8c57abfe900289f0"}}),new r({basemap:"dark-gray"})),g=new s({source:o,fields:d,objectIdField:"ObjectID",geometryType:"point",popupTemplate:{title:"{title}",content:'<a href={url} target="_blank"><img src={image} className="layer"/> {description}</a>'}});g.renderer={type:"simple",symbol:{type:"simple-marker",size:8,color:"red",outline:{width:.5,color:"red"}}};var E=new s({source:m,fields:d,objectIdField:"ObjectID",geometryType:"point",popupTemplate:{title:"{title}",content:'<a href={url} target="_blank"><img src={image} className="layer"/> {description}</a>'}});E.renderer={type:"simple",symbol:{type:"simple-marker",size:8,color:"yellow",outline:{width:.5,color:"yellow"}}};var f=new s({source:u,fields:d,objectIdField:"ObjectID",geometryType:"point",popupTemplate:{title:"{title}",content:'<a href={url} target="_blank"><img src={image} className="layer"/> {description}</a>'}});f.renderer={type:"simple",symbol:{type:"simple-marker",size:8,color:"green",outline:{width:.5,color:"green"}}};var b=new s({source:p,fields:d,objectIdField:"ObjectID",geometryType:"point",popupTemplate:{title:"{title}",content:'<a href={url} target="_blank"><img src={image} className="layer"/> {description}</a>'}});b.renderer={type:"simple",symbol:{type:"simple-marker",size:8,color:"#81cd6e",outline:{width:.5,color:"#81cd6e"}}},h.add(g,0),h.add(E,0),h.add(f,0),h.add(b,0);var v=new c({container:a.current,map:h,center:[-121.905576,37.395009],zoom:17,rotate:40});return function(){v&&(v.container=null)}}))})),r.a.createElement("div",{className:"map",ref:a})},ne=Object(o.c)((function(e){return{masks:e.ebay.masks,handSanitizer:e.ebay.handSanitizer,camping:e.ebay.camping,medicine:e.ebay.medicine}}),{getListings:function(e){return function(){var a=Object(H.a)(R.a.mark((function a(t){return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(){var a=Object(H.a)(R.a.mark((function a(n,r){var c,l;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("http://35.232.236.97:3000/magic/listings?zip=95131&limit=60",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return c=a.sent,a.next=6,c.json();case 6:if(l=a.sent){a.next=9;break}throw new Error("Empty response from server");case 9:if(!l.error){a.next=11;break}throw new Error(l.error.message);case 11:console.log("GHOAUHBIABGOUABVOIAN"),console.log(l),t({type:"GET_LISTINGS",masks:l[0],handSanitizer:l[1],camping:l[2],medicine:l[3]}),n(e),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),console.log(a.t0),r(a.t0);case 21:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}()));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return Object(n.useEffect)((function(){e.getListings()}),[]),r.a.createElement(te,{masks:e.masks,handSanitizer:e.handSanitizer,camping:e.camping,medicine:e.medicine})})),re=(t(352),function(e){return r.a.createElement("div",{className:"map-page"},r.a.createElement(G,{setVis:function(){return e.setVis(!0)},setAna:function(){return e.setAna(!0)}}),r.a.createElement(ne,null),r.a.createElement($,{ana:e.ana,setAna:function(){return e.setAna(!1)}}),r.a.createElement(W,{vis:e.vis,setVis:function(){return e.setVis(!1)}}))}),ce=function(e){var a=Object(n.useState)(!1),t=Object(y.a)(a,2),c=t[0],l=t[1],s=Object(n.useState)(!1),i=Object(y.a)(s,2),o=i[0],m=i[1];return r.a.createElement(re,{listings:e.listings,ana:o,setAna:m,setVis:l,vis:c})},le=function(e){var a;return Object(u.e)((a=v,Object(u.c)({router:Object(s.b)(a),ebay:E,stats:b})),e,Object(u.d)(Object(u.a)(Object(d.a)(v),m.a)))}();l.a.render(r.a.createElement((function(){return r.a.createElement(o.a,{store:le},r.a.createElement(s.a,{history:v},r.a.createElement(r.a.Fragment,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/map",component:ce}),r.a.createElement(i.a,{path:"/",component:L})))))}),null),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.3f28f799.chunk.js.map